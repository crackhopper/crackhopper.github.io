<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="为什么好好的vulkan程序会突然打印神秘的日志？是代码的扭曲，还是SDK的沦丧？且看我慢慢分解。\n"><title>记录调试Vulkan程序打印奇怪日志的问题</title><link rel=canonical href=https://crackhopper.github.io/2025/11/17/%E8%AE%B0%E5%BD%95%E8%B0%83%E8%AF%95vulkan%E7%A8%8B%E5%BA%8F%E6%89%93%E5%8D%B0%E5%A5%87%E6%80%AA%E6%97%A5%E5%BF%97%E7%9A%84%E9%97%AE%E9%A2%98/><link rel=stylesheet href=/scss/style.min.4d36f8dc1fd48129e1635deb4b8eb2870fa09474f7280c4cb606d40b2526994b.css><meta property='og:title' content="记录调试Vulkan程序打印奇怪日志的问题"><meta property='og:description' content="为什么好好的vulkan程序会突然打印神秘的日志？是代码的扭曲，还是SDK的沦丧？且看我慢慢分解。\n"><meta property='og:url' content='https://crackhopper.github.io/2025/11/17/%E8%AE%B0%E5%BD%95%E8%B0%83%E8%AF%95vulkan%E7%A8%8B%E5%BA%8F%E6%89%93%E5%8D%B0%E5%A5%87%E6%80%AA%E6%97%A5%E5%BF%97%E7%9A%84%E9%97%AE%E9%A2%98/'><meta property='og:site_name' content='crackhopper的技术博客'><meta property='og:type' content='article'><meta property='article:section' content='Posts'><meta property='article:tag' content='vulkan'><meta property='article:tag' content='cpp'><meta property='article:tag' content='调试'><meta property='article:published_time' content='2025-11-17T21:52:05+08:00'><meta property='article:modified_time' content='2025-11-17T21:52:05+08:00'><meta name=twitter:title content="记录调试Vulkan程序打印奇怪日志的问题"><meta name=twitter:description content="为什么好好的vulkan程序会突然打印神秘的日志？是代码的扭曲，还是SDK的沦丧？且看我慢慢分解。\n"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column compact"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_337fe2b325ec916d.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>crackhopper的技术博客</a></h1><h2 class=site-description>C++, Graphics, Game, AI/ML</h2></div></header><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>文章</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>关于我</span></a></li><li><a href=/notes/><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
<span>笔记</span></a></li><li><a href=/projects/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>项目</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>归档</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/2025/11/17/%E8%AE%B0%E5%BD%95%E8%B0%83%E8%AF%95vulkan%E7%A8%8B%E5%BA%8F%E6%89%93%E5%8D%B0%E5%A5%87%E6%80%AA%E6%97%A5%E5%BF%97%E7%9A%84%E9%97%AE%E9%A2%98/>记录调试Vulkan程序打印奇怪日志的问题</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published datetime=2025-11-17T21:52:05+08:00>Nov 17, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>7 minute read</time></div></footer></div></header><section class=article-content><p>为什么好好的vulkan程序会突然打印神秘的日志？是代码的扭曲，还是SDK的沦丧？且看我慢慢分解。</p><h2 id=起因>起因</h2><p>最近开始学习 <code>Vulkan</code> 图形接口，依照 <a class=link href=https://vulkan-tutorial.com/ target=_blank rel=noopener>https://vulkan-tutorial.com/</a> 的教程配合ChatGpt, Gemni, DeepSeek，学起来速度飞起，不亦乐乎。最后，在用了2-3天的时候，成功画出了第一个三角形。</p><p>随后，我发现程序有一个奇怪的地方：</p><img src=/images/记录调试Vulkan程序打印奇怪日志的问题-1763387839953.png alt=记录调试Vulkan程序打印奇怪日志的问题-1763387839953 width=700x416 loading=lazy><p>这个文件的全名是： <code>VulkanGLFWDemo.20251117-xxxxxx-xxxx.log</code></p><p>我的代码基本上就是照着tutorial复刻的，有改动，但都是在自己理解的情况下做的一些简单改动。绝对没有日志打印的操作。</p><p>怀着好奇心，我打开这个文件，想看看到底是啥日志。夸张的事情来了：
<img src=/images/%e8%ae%b0%e5%bd%95%e8%b0%83%e8%af%95Vulkan%e7%a8%8b%e5%ba%8f%e6%89%93%e5%8d%b0%e5%a5%87%e6%80%aa%e6%97%a5%e5%bf%97%e7%9a%84%e9%97%ae%e9%a2%98-1763387971733.png loading=lazy alt=记录调试Vulkan程序打印奇怪日志的问题-1763387971733></p><p>虽然后缀是 <code>.log</code> 但是是个二进制文件！但二进制文件咱就看不了了么？显然不是，用hex editor插件打开。我要看看二进制中是不是有什么字符串，能让我猜出来到底咋回事。</p><p><img src=/images/%e8%ae%b0%e5%bd%95%e8%b0%83%e8%af%95Vulkan%e7%a8%8b%e5%ba%8f%e6%89%93%e5%8d%b0%e5%a5%87%e6%80%aa%e6%97%a5%e5%bf%97%e7%9a%84%e9%97%ae%e9%a2%98-1763388065279.png loading=lazy alt=记录调试Vulkan程序打印奇怪日志的问题-1763388065279></p><p>WTF？！</p><h2 id=经过>经过</h2><p>鉴于自己新学Vulkan，可能不够熟练，也许是某个编译配置的开关，或者vulkan的一些底层机制我没学到，会有一些默认的打印操作。于是我虚心请教了AI的看法……</p><p>随后，经历了跟AI的各种狂猜乱试，我发现，完全是“两个臭皮匠”在讨论。</p><p>AI可以不停的给我提出各种各样没用的方案。</p><p>看来定位不到核心的原因，我是没办法解决这个问题了。</p><p>考虑到，程序无非就是二进制在CPU上跑，我直接动态调试二进制程序不就可以了？于是开启了我的WinDbg之路。</p><h2 id=windbg>WinDbg</h2><p><strong>关于 WinDbg 的使用，更多参见</strong> <a class=link href=/notes/windbg%E7%9A%84%E5%88%9D%E7%BA%A7%E7%94%A8%E6%B3%95/>WinDbg的初级用法</a></p><h1 id=问题定位>问题定位</h1><h2 id=增加断点处的行为scripting>增加断点处的行为(scripting)</h2><p>首先，我们在创建文件的位置，增加一些脚本，打印一下文件名。</p><pre tabindex=0><code>bp KERNELBASE!CreateFileA &#34;r rcx; da @rcx; k L3; g&#34;
bp KERNELBASE!CreateFileW &#34;r rcx; du @rcx; k L3; g&#34;
</code></pre><ul><li><code>r rcx</code> ： 打印 rcx的值</li><li><code>du rcx</code> ：以unicode编码解析rcx指向的地址</li><li><code>k L3</code> : 打印3行堆栈</li><li><code>g</code> ： 不停止，继续执行。</li></ul><p>接着让我们运行看下会发生什么，将我们的断点配置如下：
<img src=/images/WinDbg%e7%9a%84%e5%88%9d%e7%ba%a7%e7%94%a8%e6%b3%95-1763438550768.png loading=lazy alt=WinDbg的初级用法-1763438550768></p><p>输出很长。可以见有很多文件都被打开。（大大出乎预料）</p><p>下面一段是摘抄的部分日志：</p><pre tabindex=0><code>rcx=00000073ac18c200
00000073`ac18c200  &#34;C:\ProgramData\obs-studio-hook\o&#34;
00000073`ac18c240  &#34;bs-vulkan64.json&#34;
 # Child-SP          RetAddr               Call Site
00 00000073`ac18c1b8 00007fff`8b77f6dc     KERNEL32!CreateFileW
01 00000073`ac18c1c0 00007fff`8b77f277     vulkan_1!vkResetEvent+0x4e14c
02 00000073`ac18c2e0 00007fff`8b776595     vulkan_1!vkResetEvent+0x4dce7
rcx=00000073ac18c1d0
00000073`ac18c1d0  &#34;C:\Program Files (x86)\WeGame\ap&#34;
00000073`ac18c210  &#34;ps\Cross\Core\Stable\CrossVulkan&#34;
00000073`ac18c250  &#34;Layer64.json&#34;
 # Child-SP          RetAddr               Call Site
00 00000073`ac18c188 00007fff`8b77f6dc     KERNEL32!CreateFileW
01 00000073`ac18c190 00007fff`8b77f277     vulkan_1!vkResetEvent+0x4e14c
02 00000073`ac18c2e0 00007fff`8b776595     vulkan_1!vkResetEvent+0x4dce7
rcx=00000073ac18c1f0
00000073`ac18c1f0  &#34;C:\Program Files (x86)\Steam\Ste&#34;
00000073`ac18c230  &#34;amOverlayVulkanLayer64.json&#34;
 # Child-SP          RetAddr               Call Site
00 00000073`ac18c1a8 00007fff`8b77f6dc     KERNEL32!CreateFileW
01 00000073`ac18c1b0 00007fff`8b77f277     vulkan_1!vkResetEvent+0x4e14c
02 00000073`ac18c2e0 00007fff`8b776595     vulkan_1!vkResetEvent+0x4dce7
</code></pre><h2 id=日志分析>日志分析</h2><p>由于文件很长，因此我用AI编写了脚本专门处理上面的日志文件，提取对应的调用函数，以及打开的文件。（特意跳过stack中，系统相关的函数）</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">124
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">125
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">126
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">127
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">128
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">129
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">130
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">131
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">132
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">133
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">134
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">135
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">136
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">137
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">138
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">139
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">140
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">141
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">142
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">143
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">144
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">145
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">146
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">147
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">148
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">149
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">150
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">151
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">152
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">153
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">154
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">155
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">156
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">157
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">158
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">159
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">160
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">161
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">162
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">163
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">164
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">165
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">166
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">167
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">168
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">169
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">170
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">171
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">172
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">173
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">174
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">175
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">176
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">177
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">178
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">179
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">180
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">181
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">182
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">183
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">184
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">185
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">186
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">187
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">188
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">189
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">190
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">191
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">192
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">193
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">194
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">195
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">196
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">197
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">198
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">199
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">200
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">201
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">202
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">203
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">204
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">205
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">206
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#0a3069>&#39;&#39;&#39;
</span></span></span><span style=display:flex><span><span style=color:#0a3069>在 windbg 调试程序的时候。用如下方法设置断点：
</span></span></span><span style=display:flex><span><span style=color:#0a3069>
</span></span></span><span style=display:flex><span><span style=color:#0a3069>bp KERNELBASE!CreateFileA &#34;r rcx; da @rcx; k L3; g&#34;
</span></span></span><span style=display:flex><span><span style=color:#0a3069>bp KERNELBASE!CreateFileW &#34;r rcx; du @rcx; k L3; g&#34;
</span></span></span><span style=display:flex><span><span style=color:#0a3069>
</span></span></span><span style=display:flex><span><span style=color:#0a3069>会在中断的地方打印第一个参数。（这里是文件名字）。本脚本则是为了处理输出的日志，提取对应有效信息。
</span></span></span><span style=display:flex><span><span style=color:#0a3069>&#39;&#39;&#39;</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>import</span> <span style=color:#24292e>re</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>import</span> <span style=color:#24292e>argparse</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>import</span> <span style=color:#24292e>sys</span>
</span></span><span style=display:flex><span><span style=color:#cf222e>import</span> <span style=color:#24292e>os</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># 定义系统调用函数的前缀（使用更标准的常量命名）</span>
</span></span><span style=display:flex><span>SYSTEM_CALLS_PREFIX <span style=color:#0550ae>=</span> <span style=color:#1f2328>[</span><span style=color:#0a3069>&#39;KERNEL32!&#39;</span><span style=color:#1f2328>,</span> <span style=color:#0a3069>&#39;ntdll!&#39;</span><span style=color:#1f2328>,</span>
</span></span><span style=display:flex><span>                       <span style=color:#0a3069>&#39;ntoskrnl!&#39;</span><span style=color:#1f2328>,</span> <span style=color:#0a3069>&#39;win32u!&#39;</span><span style=color:#1f2328>,</span> <span style=color:#0a3069>&#39;WOW64!&#39;</span><span style=color:#1f2328>,</span> <span style=color:#0a3069>&#39;WOW64T!&#39;</span><span style=color:#1f2328>,</span> <span style=color:#0a3069>&#39;WOW64CPU!&#39;</span><span style=color:#1f2328>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>def</span> <span style=color:#6639ba>split_blocks</span><span style=color:#1f2328>(</span>log_text<span style=color:#1f2328>):</span>
</span></span><span style=display:flex><span>  <span style=color:#0a3069>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#0a3069>  根据 &#39;rcx=&#39; 分隔符将日志文本拆分成独立的块。
</span></span></span><span style=display:flex><span><span style=color:#0a3069>  &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#57606a># 使用 re.split，并保留分隔符</span>
</span></span><span style=display:flex><span>  blocks <span style=color:#0550ae>=</span> re<span style=color:#0550ae>.</span>split<span style=color:#1f2328>(</span><span style=color:#0a3069>r</span><span style=color:#0a3069>&#39;(rcx=.*)&#39;</span><span style=color:#1f2328>,</span> log_text<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>  <span style=color:#57606a># 清理和组合：将分隔符与其后的内容组合成一个块</span>
</span></span><span style=display:flex><span>  processed_blocks <span style=color:#0550ae>=</span> <span style=color:#1f2328>[]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>for</span> i <span style=color:#0550ae>in</span> <span style=color:#6639ba>range</span><span style=color:#1f2328>(</span><span style=color:#0550ae>1</span><span style=color:#1f2328>,</span> <span style=color:#6639ba>len</span><span style=color:#1f2328>(</span>blocks<span style=color:#1f2328>),</span> <span style=color:#0550ae>2</span><span style=color:#1f2328>):</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> i <span style=color:#0550ae>+</span> <span style=color:#0550ae>1</span> <span style=color:#0550ae>&lt;</span> <span style=color:#6639ba>len</span><span style=color:#1f2328>(</span>blocks<span style=color:#1f2328>):</span>
</span></span><span style=display:flex><span>      processed_blocks<span style=color:#0550ae>.</span>append<span style=color:#1f2328>(</span>blocks<span style=color:#1f2328>[</span>i<span style=color:#1f2328>]</span> <span style=color:#0550ae>+</span> blocks<span style=color:#1f2328>[</span>i <span style=color:#0550ae>+</span> <span style=color:#0550ae>1</span><span style=color:#1f2328>])</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>return</span> <span style=color:#1f2328>[</span>block<span style=color:#0550ae>.</span>strip<span style=color:#1f2328>()</span> <span style=color:#cf222e>for</span> block <span style=color:#0550ae>in</span> processed_blocks <span style=color:#cf222e>if</span> block<span style=color:#0550ae>.</span>strip<span style=color:#1f2328>()]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>def</span> <span style=color:#6639ba>extract_string_from_block</span><span style=color:#1f2328>(</span>block<span style=color:#1f2328>):</span>
</span></span><span style=display:flex><span>  <span style=color:#0a3069>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#0a3069>  从一个日志块中提取并拼接双引号内的字符串，形成完整的路径。
</span></span></span><span style=display:flex><span><span style=color:#0a3069>  &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#57606a># 正则表达式匹配行首的地址 (例如 0000022a`1b31a090) 后面的双引号内容</span>
</span></span><span style=display:flex><span>  path_pattern <span style=color:#0550ae>=</span> re<span style=color:#0550ae>.</span>compile<span style=color:#1f2328>(</span>
</span></span><span style=display:flex><span>      <span style=color:#0a3069>r</span><span style=color:#0a3069>&#39;^\s*[\da-fA-F]+`[\da-fA-F]+\s+&#34;(.*?)&#34;$&#39;</span><span style=color:#1f2328>,</span> re<span style=color:#0550ae>.</span>MULTILINE<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>  <span style=color:#57606a># 查找所有匹配项</span>
</span></span><span style=display:flex><span>  path_segments <span style=color:#0550ae>=</span> path_pattern<span style=color:#0550ae>.</span>findall<span style=color:#1f2328>(</span>block<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>  <span style=color:#57606a># 拼接所有段落</span>
</span></span><span style=display:flex><span>  string_value <span style=color:#0550ae>=</span> <span style=color:#0a3069>&#34;&#34;</span><span style=color:#0550ae>.</span>join<span style=color:#1f2328>(</span>path_segments<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>return</span> string_value
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>def</span> <span style=color:#6639ba>extract_rcx_id</span><span style=color:#1f2328>(</span>block<span style=color:#1f2328>):</span>
</span></span><span style=display:flex><span>  <span style=color:#0a3069>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#0a3069>  从一个日志块的开头提取 rcx=... 的值作为块的标识。
</span></span></span><span style=display:flex><span><span style=color:#0a3069>  &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#57606a># 正则表达式匹配 &#39;rcx=&#39; 后跟至少一个或多个十六进制字符</span>
</span></span><span style=display:flex><span>  rcx_pattern <span style=color:#0550ae>=</span> re<span style=color:#0550ae>.</span>compile<span style=color:#1f2328>(</span><span style=color:#0a3069>r</span><span style=color:#0a3069>&#39;(rcx=[\da-fA-F]+)&#39;</span><span style=color:#1f2328>,</span> re<span style=color:#0550ae>.</span>IGNORECASE<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>  rcx_match <span style=color:#0550ae>=</span> rcx_pattern<span style=color:#0550ae>.</span>search<span style=color:#1f2328>(</span>block<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>if</span> rcx_match<span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>return</span> rcx_match<span style=color:#0550ae>.</span>group<span style=color:#1f2328>(</span><span style=color:#0550ae>1</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>else</span><span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>return</span> <span style=color:#0a3069>&#34;N/A&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>def</span> <span style=color:#6639ba>extract_callsite_info</span><span style=color:#1f2328>(</span>block<span style=color:#1f2328>):</span>
</span></span><span style=display:flex><span>  <span style=color:#0a3069>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#0a3069>  从一个日志块中提取 Call Site 信息，并找到第一个非系统调用函数。
</span></span></span><span style=display:flex><span><span style=color:#0a3069>  &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#57606a># Call Site 区域通常以 &#39;# Child-SP&#39; 开始</span>
</span></span><span style=display:flex><span>  callstack_start_marker <span style=color:#0550ae>=</span> <span style=color:#0a3069>&#39;# Child-SP&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>if</span> callstack_start_marker <span style=color:#0550ae>not</span> <span style=color:#0550ae>in</span> block<span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>return</span> <span style=color:#0a3069>&#34;Call Site region not found.&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#57606a># 找到 Call Site 区域的起始位置</span>
</span></span><span style=display:flex><span>  start_index <span style=color:#0550ae>=</span> block<span style=color:#0550ae>.</span>find<span style=color:#1f2328>(</span>callstack_start_marker<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>  callstack_section <span style=color:#0550ae>=</span> block<span style=color:#1f2328>[</span>start_index<span style=color:#1f2328>:]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#57606a># 按行分割</span>
</span></span><span style=display:flex><span>  lines <span style=color:#0550ae>=</span> callstack_section<span style=color:#0550ae>.</span>split<span style=color:#1f2328>(</span><span style=color:#0a3069>&#39;</span><span style=color:#0a3069>\n</span><span style=color:#0a3069>&#39;</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#57606a># 提取 Call Site</span>
</span></span><span style=display:flex><span>  call_sites <span style=color:#0550ae>=</span> <span style=color:#1f2328>[]</span>
</span></span><span style=display:flex><span>  <span style=color:#57606a># 跳过标题行和可能为空的行</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>for</span> line <span style=color:#0550ae>in</span> lines<span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>    line <span style=color:#0550ae>=</span> line<span style=color:#0550ae>.</span>strip<span style=color:#1f2328>()</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#0550ae>not</span> line <span style=color:#0550ae>or</span> line<span style=color:#0550ae>.</span>startswith<span style=color:#1f2328>(</span><span style=color:#0a3069>&#39;#&#39;</span><span style=color:#1f2328>):</span>
</span></span><span style=display:flex><span>      <span style=color:#cf222e>continue</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#57606a># 假设 Call Site 是每行最后一个非空的字段（通常是模块!函数名+偏移量）</span>
</span></span><span style=display:flex><span>    parts <span style=color:#0550ae>=</span> line<span style=color:#0550ae>.</span>split<span style=color:#1f2328>()</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#6639ba>len</span><span style=color:#1f2328>(</span>parts<span style=color:#1f2328>)</span> <span style=color:#0550ae>&gt;=</span> <span style=color:#0550ae>4</span><span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>      call_site <span style=color:#0550ae>=</span> parts<span style=color:#1f2328>[</span><span style=color:#0550ae>-</span><span style=color:#0550ae>1</span><span style=color:#1f2328>]</span>
</span></span><span style=display:flex><span>      call_sites<span style=color:#0550ae>.</span>append<span style=color:#1f2328>(</span>call_site<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#57606a># 查找第一个非系统调用函数</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>for</span> site <span style=color:#0550ae>in</span> call_sites<span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>    is_system_call <span style=color:#0550ae>=</span> <span style=color:#cf222e>False</span>
</span></span><span style=display:flex><span>    <span style=color:#57606a># 排除地址/偏移量部分，只保留函数名（如 igxelpicd64!DumpRegistryKeyDefinitions）</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#0a3069>&#39;!&#39;</span> <span style=color:#0550ae>not</span> <span style=color:#0550ae>in</span> site<span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>      <span style=color:#cf222e>continue</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>for</span> sys_call <span style=color:#0550ae>in</span> SYSTEM_CALLS_PREFIX<span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>      <span style=color:#cf222e>if</span> site<span style=color:#0550ae>.</span>startswith<span style=color:#1f2328>(</span>sys_call<span style=color:#1f2328>):</span>
</span></span><span style=display:flex><span>        is_system_call <span style=color:#0550ae>=</span> <span style=color:#cf222e>True</span>
</span></span><span style=display:flex><span>        <span style=color:#cf222e>break</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> <span style=color:#0550ae>not</span> is_system_call<span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>      <span style=color:#cf222e>return</span> site
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>return</span> <span style=color:#0a3069>&#34;Only system calls or no calls found.&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>def</span> <span style=color:#6639ba>parse_log</span><span style=color:#1f2328>(</span>log_text<span style=color:#1f2328>):</span>
</span></span><span style=display:flex><span>  <span style=color:#0a3069>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#0a3069>  主解析函数，协调所有子函数。
</span></span></span><span style=display:flex><span><span style=color:#0a3069>  &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  blocks <span style=color:#0550ae>=</span> split_blocks<span style=color:#1f2328>(</span>log_text<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>  results <span style=color:#0550ae>=</span> <span style=color:#1f2328>[]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>for</span> block <span style=color:#0550ae>in</span> blocks<span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>    rcx_value <span style=color:#0550ae>=</span> extract_rcx_id<span style=color:#1f2328>(</span>block<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>    string_value <span style=color:#0550ae>=</span> extract_string_from_block<span style=color:#1f2328>(</span>block<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>    first_non_sys_call <span style=color:#0550ae>=</span> extract_callsite_info<span style=color:#1f2328>(</span>block<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#57606a># 检查是否提取到有效的字符串和 Call Site</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>if</span> string_value <span style=color:#0550ae>and</span> first_non_sys_call <span style=color:#0550ae>!=</span> <span style=color:#0a3069>&#34;Only system calls or no calls found.&#34;</span><span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>      results<span style=color:#0550ae>.</span>append<span style=color:#1f2328>({</span>
</span></span><span style=display:flex><span>          <span style=color:#0a3069>&#34;rcx_value&#34;</span><span style=color:#1f2328>:</span> rcx_value<span style=color:#1f2328>,</span>
</span></span><span style=display:flex><span>          <span style=color:#0a3069>&#34;string_value&#34;</span><span style=color:#1f2328>:</span> string_value<span style=color:#1f2328>,</span>
</span></span><span style=display:flex><span>          <span style=color:#0a3069>&#34;first_non_system_call&#34;</span><span style=color:#1f2328>:</span> first_non_sys_call
</span></span><span style=display:flex><span>      <span style=color:#1f2328>})</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>return</span> results
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># --- 新增命令行参数和主函数 ---</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>def</span> <span style=color:#6639ba>main</span><span style=color:#1f2328>():</span>
</span></span><span style=display:flex><span>  <span style=color:#0a3069>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#0a3069>  程序入口点，处理命令行参数和文件读取。
</span></span></span><span style=display:flex><span><span style=color:#0a3069>  &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>  parser <span style=color:#0550ae>=</span> argparse<span style=color:#0550ae>.</span>ArgumentParser<span style=color:#1f2328>(</span>
</span></span><span style=display:flex><span>      description<span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;解析 WinDbg 日志文件，提取文件路径和第一个非系统调用 Call Site。&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>  <span style=color:#57606a># 定义必须传入的日志文件参数</span>
</span></span><span style=display:flex><span>  parser<span style=color:#0550ae>.</span>add_argument<span style=color:#1f2328>(</span>
</span></span><span style=display:flex><span>      <span style=color:#0a3069>&#34;log_file&#34;</span><span style=color:#1f2328>,</span>
</span></span><span style=display:flex><span>      <span style=color:#6639ba>type</span><span style=color:#0550ae>=</span><span style=color:#6639ba>str</span><span style=color:#1f2328>,</span>
</span></span><span style=display:flex><span>      help<span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;要解析的 WinDbg 日志文件路径。&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#57606a># 定义可选的输出文件参数</span>
</span></span><span style=display:flex><span>  parser<span style=color:#0550ae>.</span>add_argument<span style=color:#1f2328>(</span>
</span></span><span style=display:flex><span>      <span style=color:#0a3069>&#34;-o&#34;</span><span style=color:#1f2328>,</span> <span style=color:#0a3069>&#34;--output&#34;</span><span style=color:#1f2328>,</span>
</span></span><span style=display:flex><span>      <span style=color:#6639ba>type</span><span style=color:#0550ae>=</span><span style=color:#6639ba>str</span><span style=color:#1f2328>,</span>
</span></span><span style=display:flex><span>      help<span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;将解析结果写入指定文件（例如 result.txt）。如果未指定，则打印到控制台。&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  args <span style=color:#0550ae>=</span> parser<span style=color:#0550ae>.</span>parse_args<span style=color:#1f2328>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  log_file_path <span style=color:#0550ae>=</span> args<span style=color:#0550ae>.</span>log_file
</span></span><span style=display:flex><span>  output_file_path <span style=color:#0550ae>=</span> args<span style=color:#0550ae>.</span>output
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>if</span> <span style=color:#0550ae>not</span> os<span style=color:#0550ae>.</span>path<span style=color:#0550ae>.</span>exists<span style=color:#1f2328>(</span>log_file_path<span style=color:#1f2328>):</span>
</span></span><span style=display:flex><span>    <span style=color:#6639ba>print</span><span style=color:#1f2328>(</span><span style=color:#0a3069>f</span><span style=color:#0a3069>&#34;错误：文件未找到 -&gt; </span><span style=color:#0a3069>{</span>log_file_path<span style=color:#0a3069>}</span><span style=color:#0a3069>&#34;</span><span style=color:#1f2328>,</span> file<span style=color:#0550ae>=</span>sys<span style=color:#0550ae>.</span>stderr<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>    sys<span style=color:#0550ae>.</span>exit<span style=color:#1f2328>(</span><span style=color:#0550ae>1</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>try</span><span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>    <span style=color:#57606a># 读取日志文件内容，使用 &#39;utf-8&#39; 或 &#39;latin-1&#39; 应对可能的编码问题</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>with</span> <span style=color:#6639ba>open</span><span style=color:#1f2328>(</span>log_file_path<span style=color:#1f2328>,</span> <span style=color:#0a3069>&#39;r&#39;</span><span style=color:#1f2328>,</span> encoding<span style=color:#0550ae>=</span><span style=color:#0a3069>&#39;utf-8&#39;</span><span style=color:#1f2328>,</span> errors<span style=color:#0550ae>=</span><span style=color:#0a3069>&#39;ignore&#39;</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>as</span> f<span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>      log_content <span style=color:#0550ae>=</span> f<span style=color:#0550ae>.</span>read<span style=color:#1f2328>()</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>except</span> Exception <span style=color:#cf222e>as</span> e<span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>    <span style=color:#6639ba>print</span><span style=color:#1f2328>(</span><span style=color:#0a3069>f</span><span style=color:#0a3069>&#34;读取文件时发生错误: </span><span style=color:#0a3069>{</span>e<span style=color:#0a3069>}</span><span style=color:#0a3069>&#34;</span><span style=color:#1f2328>,</span> file<span style=color:#0550ae>=</span>sys<span style=color:#0550ae>.</span>stderr<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>    sys<span style=color:#0550ae>.</span>exit<span style=color:#1f2328>(</span><span style=color:#0550ae>1</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#57606a># 执行解析</span>
</span></span><span style=display:flex><span>  parsed_results <span style=color:#0550ae>=</span> parse_log<span style=color:#1f2328>(</span>log_content<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#57606a># 格式化输出结果</span>
</span></span><span style=display:flex><span>  output_lines <span style=color:#0550ae>=</span> <span style=color:#1f2328>[]</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>for</span> i<span style=color:#1f2328>,</span> result <span style=color:#0550ae>in</span> <span style=color:#6639ba>enumerate</span><span style=color:#1f2328>(</span>parsed_results<span style=color:#1f2328>):</span>
</span></span><span style=display:flex><span>    output_lines<span style=color:#0550ae>.</span>append<span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;-&#34;</span> <span style=color:#0550ae>*</span> <span style=color:#0550ae>50</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>    output_lines<span style=color:#0550ae>.</span>append<span style=color:#1f2328>(</span><span style=color:#0a3069>f</span><span style=color:#0a3069>&#34;记录 </span><span style=color:#0a3069>{</span>i <span style=color:#0550ae>+</span> <span style=color:#0550ae>1</span><span style=color:#0a3069>}</span><span style=color:#0a3069> (</span><span style=color:#0a3069>{</span>result<span style=color:#1f2328>[</span><span style=color:#0a3069>&#39;rcx_value&#39;</span><span style=color:#1f2328>]</span><span style=color:#0a3069>}</span><span style=color:#0a3069>)&#34;</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>    output_lines<span style=color:#0550ae>.</span>append<span style=color:#1f2328>(</span><span style=color:#0a3069>f</span><span style=color:#0a3069>&#34;  文件路径/字符串: </span><span style=color:#0a3069>{</span>result<span style=color:#1f2328>[</span><span style=color:#0a3069>&#39;string_value&#39;</span><span style=color:#1f2328>]</span><span style=color:#0a3069>}</span><span style=color:#0a3069>&#34;</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>    output_lines<span style=color:#0550ae>.</span>append<span style=color:#1f2328>(</span><span style=color:#0a3069>f</span><span style=color:#0a3069>&#34;  调用点: </span><span style=color:#0a3069>{</span>result<span style=color:#1f2328>[</span><span style=color:#0a3069>&#39;first_non_system_call&#39;</span><span style=color:#1f2328>]</span><span style=color:#0a3069>}</span><span style=color:#0a3069>&#34;</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>  output_lines<span style=color:#0550ae>.</span>append<span style=color:#1f2328>(</span><span style=color:#0a3069>&#34;-&#34;</span> <span style=color:#0550ae>*</span> <span style=color:#0550ae>50</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>  output_text <span style=color:#0550ae>=</span> <span style=color:#0a3069>&#34;</span><span style=color:#0a3069>\n</span><span style=color:#0a3069>&#34;</span><span style=color:#0550ae>.</span>join<span style=color:#1f2328>(</span>output_lines<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#57606a># 处理输出</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>if</span> output_file_path<span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>try</span><span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>      <span style=color:#cf222e>with</span> <span style=color:#6639ba>open</span><span style=color:#1f2328>(</span>output_file_path<span style=color:#1f2328>,</span> <span style=color:#0a3069>&#39;w&#39;</span><span style=color:#1f2328>,</span> encoding<span style=color:#0550ae>=</span><span style=color:#0a3069>&#39;utf-8&#39;</span><span style=color:#1f2328>)</span> <span style=color:#cf222e>as</span> f<span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>        f<span style=color:#0550ae>.</span>write<span style=color:#1f2328>(</span>output_text<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>      <span style=color:#6639ba>print</span><span style=color:#1f2328>(</span><span style=color:#0a3069>f</span><span style=color:#0a3069>&#34;解析结果已成功写入文件: </span><span style=color:#0a3069>{</span>output_file_path<span style=color:#0a3069>}</span><span style=color:#0a3069>&#34;</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>    <span style=color:#cf222e>except</span> Exception <span style=color:#cf222e>as</span> e<span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>      <span style=color:#6639ba>print</span><span style=color:#1f2328>(</span><span style=color:#0a3069>f</span><span style=color:#0a3069>&#34;写入文件时发生错误: </span><span style=color:#0a3069>{</span>e<span style=color:#0a3069>}</span><span style=color:#0a3069>&#34;</span><span style=color:#1f2328>,</span> file<span style=color:#0550ae>=</span>sys<span style=color:#0550ae>.</span>stderr<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>      sys<span style=color:#0550ae>.</span>exit<span style=color:#1f2328>(</span><span style=color:#0550ae>1</span><span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>  <span style=color:#cf222e>else</span><span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>    <span style=color:#57606a># 打印到控制台</span>
</span></span><span style=display:flex><span>    <span style=color:#6639ba>print</span><span style=color:#1f2328>(</span>output_text<span style=color:#1f2328>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cf222e>if</span> <span style=color:#953800>__name__</span> <span style=color:#0550ae>==</span> <span style=color:#0a3069>&#34;__main__&#34;</span><span style=color:#1f2328>:</span>
</span></span><span style=display:flex><span>  main<span style=color:#1f2328>()</span>
</span></span></code></pre></td></tr></table></div></div><p>处理结果（部分摘要）：</p><pre tabindex=0><code>--------------------------------------------------
记录 1 (rcx=00000073ac18c200)
  文件路径/字符串: C:\ProgramData\obs-studio-hook\obs-vulkan64.json
  调用点: vulkan_1!vkResetEvent+0x4e14c
--------------------------------------------------
记录 2 (rcx=00000073ac18c1d0)
  文件路径/字符串: C:\Program Files (x86)\WeGame\apps\Cross\Core\Stable\CrossVulkanLayer64.json
  调用点: vulkan_1!vkResetEvent+0x4e14c
--------------------------------------------------
记录 3 (rcx=00000073ac18c1f0)
  文件路径/字符串: C:\Program Files (x86)\Steam\SteamOverlayVulkanLayer64.json
  调用点: vulkan_1!vkResetEvent+0x4e14c
--------------------------------------------------
记录 4 (rcx=00000073ac18c1f0)
  文件路径/字符串: C:\Program Files (x86)\Steam\SteamFossilizeVulkanLayer64.json
  调用点: vulkan_1!vkResetEvent+0x4e14c
--------------------------------------------------
记录 5 (rcx=00000073ac18c1b0)
  文件路径/字符串: C:\Program Files (x86)\Epic Games\Launcher\Portal\Extras\Overlay\EOSOverlayVkLayer-Win32.json
  调用点: vulkan_1!vkResetEvent+0x4e14c
--------------------------------------------------
记录 6 (rcx=00000073ac18c1b0)
  文件路径/字符串: C:\Program Files (x86)\Epic Games\Launcher\Portal\Extras\Overlay\EOSOverlayVkLayer-Win64.json
  调用点: vulkan_1!vkResetEvent+0x4e14c
--------------------------------------------------
...
--------------------------------------------------
记录 1025 (rcx=0000022a1b31a090)
  文件路径/字符串: C:\Users\develop\AppData\LocalLow\Intel\ShaderCache\fef977ca3300ec0bc2c0cffc3b7876ee20569af48fb97cdc1b368bbc0e5a57f6   
  调用点: igxelpicd64!DumpRegistryKeyDefinitions+0xb43aa
--------------------------------------------------
记录 1026 (rcx=0000022a1b31a090)
  文件路径/字符串: C:\Users\develop\AppData\LocalLow\Intel\ShaderCache\ff99df07dcd0c6178ee47752e83177aee8f50f71c5e1bf8eaf748c39909b3bb1   
  调用点: igxelpicd64!DumpRegistryKeyDefinitions+0xb43aa
--------------------------------------------------
记录 1027 (rcx=0000022a1b31a090)
  文件路径/字符串: C:\Users\develop\AppData\LocalLow\Intel\ShaderCache\ffbf928ad5120a2f1efed1a992d0e667884951d6f937bdb98f037eae46cde6e1   
  调用点: igxelpicd64!DumpRegistryKeyDefinitions+0xb43aa
--------------------------------------------------
</code></pre><h2 id=日志问题>日志问题</h2><p>首先，居然打开了1027个文件！！大部分都是由 igxelpicd64 和 igvk64 打开的。这两个是什么？</p><h2 id=原因定位>原因定位</h2><h3 id=1-本地打开日志文件>1. 本地打开日志文件</h3><p>通过日志，我们可以搜索，找到：</p><pre tabindex=0><code>rcx=0000022a16429dc0
0000022a`16429dc0  &#34;C:/Program Files (x86)/WeGame/ap&#34;
0000022a`16429e00  &#34;ps/Cross/Core/Stable/../../Log/V&#34;
0000022a`16429e40  &#34;ulkanGLFWDemo.20251118-120259-84&#34;
0000022a`16429e80  &#34;2.log&#34;
 # Child-SP          RetAddr               Call Site
00 00000073`ac189e88 00007ff8`499ba227     KERNEL32!CreateFileW
01 00000073`ac189e90 00007ff8`499b9729     CrossVulkanLayer64!base::BaseTimer::Stop+0xc5297
02 00000073`ac189f80 00007ff8`499ba53d     CrossVulkanLayer64!base::BaseTimer::Stop+0xc4799
</code></pre><p>显然，有个奇怪的模块调用。</p><p>可以看到 <code>CrossVulkanLayer64</code> 这个模块是罪魁祸首，我们看看到底这个模块啥来头</p><pre tabindex=0><code>0:000&gt; lmv m CrossVulkanLayer64
Browse full module list
start             end                 module name
00007fff`8bb10000 00007fff`8bcdf000   CrossVulkanLayer64   (export symbols)       CrossVulkanLayer64.dll
    Loaded symbol image file: CrossVulkanLayer64.dll
    Mapped memory image file: C:\Program Files (x86)\WeGame\apps\Cross\Core\Stable\CrossVulkanLayer64.dll
    Image path: C:\Program Files (x86)\WeGame\apps\Cross\Core\Stable\CrossVulkanLayer64.dll
    Image name: CrossVulkanLayer64.dll
    Browse all global symbols  functions  data  Symbol Reload
    Timestamp:        Tue Sep 10 20:00:11 2024 (66E034CB)
    CheckSum:         001D4A34
    ImageSize:        001CF000
    Mapping Form:     Loaded
    File version:     1.0.0.0
    Product version:  1.0.0.0
    File flags:       0 (Mask 17)
    File OS:          4 Unknown Win32
    File type:        2.0 Dll
    File date:        00000000.00000000
    Translations:     0804.04b0
    Information from resource tables:
        CompanyName:      Tencent
        ProductName:      Tencent.WeGame.Cross
        InternalName:     VulkanLayer
        ProductVersion:   1.0.0.0
        FileVersion:      1.0.0.0
        FileDescription:  Tencent.WeGame.Cross.VulkanLayer
        LegalCopyright:   Copyright (C) 2017 Tencent.All Rights Reserved
        LegalTrademarks:  Tencent
</code></pre><p><strong>原来是你！腾讯，WeGame！</strong></p><h3 id=2-igvk64被疯狂调用和操作未解决>2. igvk64被疯狂调用和操作（未解决）</h3><p>在我们通过 <code>CreateFileW</code> 断点，打印所有打开文件的操作的时候。日志里产生了大量 igvk64 和 igxeplicd 的调用。到底是怎么回事？</p><p>在出问题的时候，手动中断，获取到堆栈信息：</p><pre tabindex=0><code>[0x0]   KERNEL32!CreateFileW   0x55168e3588   0x7fff7f6e783a   
[0x1]   igvk64!ctlTemperatureGetState+0x751fba   0x55168e3590   0x7fff7f6e67e9   
[0x2]   igvk64!ctlTemperatureGetState+0x750f69   0x55168e3760   0x7fff7f6d17f9   
[0x3]   igvk64!ctlTemperatureGetState+0x73bf79   0x55168e3800   0x7fff7f6cecfb   
[0x4]   igvk64!ctlTemperatureGetState+0x73947b   0x55168e39a0   0x7fff7f6ce00b   
[0x5]   igvk64!ctlTemperatureGetState+0x73878b   0x55168e39e0   0x7fff7f6c4276   
[0x6]   igvk64!ctlTemperatureGetState+0x72e9f6   0x55168e3a30   0x7fff7ee7040f   
[0x7]   igvk64!DumpRegistryKeyDefinitions+0x1c605f   0x55168e3ba0   0x7fff7ee607fb 
[0x8]   igvk64!DumpRegistryKeyDefinitions+0x1b644b   0x55168e41a0   0x7fff7ee476a4 
[0x9]   igvk64!DumpRegistryKeyDefinitions+0x19d2f4   0x55168e4310   0x7fff7ee31bd5 
[0xa]   igvk64!DumpRegistryKeyDefinitions+0x187825   0x55168e43c0   0x7fff7eda31e6 
[0xb]   igvk64!DumpRegistryKeyDefinitions+0xf8e36   0x55168e4410   0x7fff7ed87534  
[0xc]   igvk64!DumpRegistryKeyDefinitions+0xdd184   0x55168fb620   0x7fff7ed5ec7d  
[0xd]   igvk64!DumpRegistryKeyDefinitions+0xb48cd   0x55168fb690   0x7fff7ece0ca5  
[0xe]   igvk64!DumpRegistryKeyDefinitions+0x368f5   0x55168fb6e0   0x7fffbd89c6dc  
[0xf]   vulkan_1!vkResetEvent+0x4b14c   0x55168fb7b0   0x7fff810205e7   
[0x10]   VkLayer_khronos_validation!vulkan_layer_chassis::CreateInstance+0x217   
[0x11]   CrossVulkanLayer64!vkCreateInstance+0x180   0x55168fbad0   0x7ff8498fcacb 
[0x12]   graphics_hook64!dummy_debug_proc+0x294b   0x55168fbbe0   0x7fff741fc952   
[0x13]   nvoglv64!DrvPresentBuffers+0x3698d2   0x55168fbca0   0x7fffbd883652   
[0x14]   vulkan_1!vkResetEvent+0x320c2   0x55168fbcd0   0x7fffbd8a751e   
[0x15]   vulkan_1!vkResetEvent+0x55f8e   0x55168fc000   0x7ff717220f44   
[0x16]   VulkanGLFWDemo!HelloTriangleApplication::createInstance+0x244   0x55168ff410   0x7ff717224b64
</code></pre><p>关于 igxeplicd 产生的大量文件创建。</p><pre tabindex=0><code> # Child-SP          RetAddr               Call Site
00 00000055`168fd778 00007fff`f46ce16a     KERNEL32!CreateFileW
01 00000055`168fd780 00007fff`f46cb720     igxelpicd64!DumpRegistryKeyDefinitions+0xb43aa
02 00000055`168fdb70 00007fff`f46c8cfb     igxelpicd64!DumpRegistryKeyDefinitions+0xb1960
03 00000055`168fdd10 00007fff`f46c800b     igxelpicd64!DumpRegistryKeyDefinitions+0xaef3b
04 00000055`168fdd50 00007fff`f46bbe16     igxelpicd64!DumpRegistryKeyDefinitions+0xae24b
05 00000055`168fdda0 00007fff`f457ce7c     igxelpicd64!DumpRegistryKeyDefinitions+0xa2056
06 00000055`168fdf10 00007fff`f457b59e     igxelpicd64!DrvValidateVersion+0x13c57c
07 00000055`168fe4e0 00007fff`f456e572     igxelpicd64!DrvValidateVersion+0x13ac9e
08 00000055`168fe520 00007fff`f443f6aa     igxelpicd64!DrvValidateVersion+0x12dc72
09 00000055`168fe560 00007fff`f53bacfe     igxelpicd64!DrvDescribePixelFormat+0x3a
0a 00000055`168fe5b0 00007fff`f53fd7e9     OpenGL32!_DescribeDriverPixelFormat+0x5a
0b 00000055`168fe5f0 00007fff`f5396e9f     OpenGL32!LoadAvailableDrivers+0x3d9
0c 00000055`168fec50 00007fff`7422005c     OpenGL32!wglDescribePixelFormat+0xdf
0d 00000055`168fed90 00007fff`74223622     nvoglv64!vk_optimusGetInstanceProcAddr+0x230ec
0e 00000055`168fedc0 00007fff`7421cfd7     nvoglv64!vk_optimusGetInstanceProcAddr+0x266b2
0f 00000055`168fee10 00007fff`bd8ad9cc     nvoglv64!vk_optimusGetInstanceProcAddr+0x20067
10 00000055`168fee40 00007fff`812b4934     vulkan_1!vkResetEvent+0x5c43c
11 (Inline Function) --------`--------     VkLayer_khronos_validation!vvl::dispatch::Device::CreateSwapchainKHR+0xc1 [C:\SDKBuild\build-X64-1.4.328.1\Vulkan-ValidationLayers\layers\vulkan\generated\dispatch_object.cpp @ 3153] 
12 00000055`168fef30 00007fff`8bb1af8a     VkLayer_khronos_validation!vulkan_layer_chassis::CreateSwapchainKHR+0x2c4 [C:\SDKBuild\build-X64-1.4.328.1\Vulkan-ValidationLayers\layers\vulkan\generated\chassis.cpp @ 10385] 
13 00000055`168ff140 00007ff8`498fdda0     CrossVulkanLayer64!vkCreateSwapchainKHR+0x182
14 00000055`168ff270 00007fff`bd8af465     graphics_hook64!dummy_debug_proc+0x3c20
15 00000055`168ff340 00007ff7`17221c0d     vulkan_1!vkResetEvent+0x5ded5
16 00000055`168ff380 00007ff7`17224b96     VulkanGLFWDemo!HelloTriangleApplication::createSwapChain+0x27d [C:\Users\develop\game-dev\renderer\src\main.cpp @ 985] 
17 00000055`168ff5d0 00007ff7`172286de     VulkanGLFWDemo!HelloTriangleApplication::initVulkan+0x46 [C:\Users\develop\game-dev\renderer\src\main.cpp @ 800] 
18 00000055`168ff600 00007ff7`171f878f     VulkanGLFWDemo!HelloTriangleApplication::run+0x1e [C:\Users\develop\game-dev\renderer\src\main.cpp @ 63] 
19 00000055`168ff630 00007ff7`17256919     VulkanGLFWDemo!main+0x2f [C:\Users\develop\game-dev\renderer\src\main.cpp @ 1431] 
1a 00000055`168ff8a0 00007ff7`172567c2     VulkanGLFWDemo!invoke_main+0x39 [D:\a\_work\1\s\src\vctools\crt\vcstartup\src\startup\exe_common.inl @ 79] 
1b 00000055`168ff8f0 00007ff7`1725667e     VulkanGLFWDemo!__scrt_common_main_seh+0x132 [D:\a\_work\1\s\src\vctools\crt\vcstartup\src\startup\exe_common.inl @ 288] 
1c 00000055`168ff960 00007ff7`172569ae     VulkanGLFWDemo!__scrt_common_main+0xe [D:\a\_work\1\s\src\vctools\crt\vcstartup\src\startup\exe_common.inl @ 331] 
1d 00000055`168ff990 00007ff8`93b6e8d7     VulkanGLFWDemo!mainCRTStartup+0xe [D:\a\_work\1\s\src\vctools\crt\vcstartup\src\startup\exe_main.cpp @ 17] 
1e 00000055`168ff9c0 00007ff8`94fac53c     KERNEL32!BaseThreadInitThunk+0x17
1f 00000055`168ff9f0 00000000`00000000     ntdll!RtlUserThreadStart+0x2c
</code></pre><p>实际上，虽然可以看到validation layer的影子。但无法确定是由其导致的。( <strong>因为validation layer有可能仅仅是转发一下调用</strong> )</p><h2 id=为什么会这样vulkan为什么加载其他的dll>为什么会这样？Vulkan为什么加载其他的dll？</h2><p>在 <strong>Vulkan 的设计机制中</strong>，<code>vkCreateInstance</code> 会根据调用时指定的 <strong>Layer 列表</strong> 去加载对应 Layer（包括第三方 Validation Layer）的动态库（Windows 下为 <code>.dll</code>，Linux 下为 <code>.so</code>）。<br>这是 Vulkan <strong>Layer 机制</strong>的正常行为，而不是驱动“偷偷加载”。</p><h3 id=原因>原因</h3><p>vulkan初始化的时候，会检查注册表，加载所有 <code>Implicit Layer</code> 的配置（manifest）。这样同样也会加载对应的dll。这就是为什么 WeGame 的Layer被加载了。（vulkan的这个功能似乎很有安全问题啊！）</p><p><strong>关于validation layer发现机制，更多参见</strong>： <a class=link href=/notes/vulkan%E7%9A%84layer%E5%8F%91%E7%8E%B0%E6%9C%BA%E5%88%B6/>Vulkan的Layer发现机制和debug</a></p><h1 id=神秘日志问题解决>神秘日志问题解决！</h1><h2 id=方法一>方法一</h2><p>仅把我使用的layer，对应的json和dll，存放到项目目录中。用 <code>VK_LAYER_PATH</code> 指定程序仅加载我指定的layer。</p><p>（暂时方法二更容易，采用方法二）</p><h2 id=方法二>方法二</h2><p>设定环境变量：</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#953800>VK_LOADER_LAYERS_DISABLE</span><span style=color:#0550ae>=</span>~implicit~
</span></span></code></pre></td></tr></table></div></div><p>或</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#953800>VK_LOADER_LAYERS_DISABLE</span><span style=color:#0550ae>=</span>*wegame*
</span></span></code></pre></td></tr></table></div></div><h1 id=遗留问题未解决intel驱动总被调用>遗留问题未解决！intel驱动总被调用</h1><p>由于内容比较多，单独开了一个帖子来记录。这个问题当前没找到解决方案。</p><p><a class=link href=/2025/11/21/vulkan%E7%A8%8B%E5%BA%8F%E4%B8%ADintel%E9%A9%B1%E5%8A%A8%E6%80%BB%E6%98%AF%E8%A2%AB%E8%B0%83%E7%94%A8/>Vulkan程序中Intel驱动总是被调用（未解决）</a></p></section><footer class=article-footer><section class=article-tags><a href=/tags/vulkan/>Vulkan</a>
<a href=/tags/cpp/>Cpp</a>
<a href=/tags/%E8%B0%83%E8%AF%95/>调试</a></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{const e=[".main-article",".widget--toc"];e.forEach(e=>{const t=document.querySelector(e);t&&renderMathInElement(t,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})})</script></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/notes/cmake%E5%85%A5%E9%97%A8/><div class=article-details><h2 class=article-title>cmake入门</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2025 crackhopper的技术博客</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.32.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.c922af694cc257bf1ecc41c0dd7b0430f9114ec280ccf67cd2c6ad55f5316c4e.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>